<header>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MegaCart UserDetails.net</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Itim&family=Jockey+One&display=swap" rel="stylesheet">
  <!-- Jumbotron -->
  <style>
    #preloader{
            background: white url(img/load.gif) no-repeat  center;
            background-size: 15%;
            height: 100vh;
            width: 100%;
            position: fixed;
            z-index:100;
            }
  </style>
  <div class="px-2 nav-div text-center"
    style="background-color: #392539 !important ;justify-content: center; height: 70px;">
    <div class="container-fluid">
      <div class="row gy-3">
        <!-- Left elements -->
        <div class="col-lg-2 col-sm-4 col-4">
          <a href="/" class="float-md-none">
            <img style="height: 30px;  margin-top: 13px;" src="/img/MegaCart Logo.png" alt="">
            </a>
        </div>
        <!-- Left elements -->

        <!-- Center elements -->
        <!-- Center elements -->

        <!-- Right elements -->
        <div class="col-lg-5 col-md-12 col-12" style="visibility: hidden;">
          <div class="input-group float-center">
            <div class="form-outline bg-white" style="border-radius: 5px;">
              <input type="search" id="form1" class="form-control" />
              <label class="form-label" for="form1">Search</label>
            </div>
            <button type="button" class="btn btn-white shadow-0" style="background-color: #BF7DC1 ;">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
        <!-- Right elements -->
      </div>
    </div>
  </div>
  <!-- Jumbotron -->

</header>
<link rel="icon" type="image/png" href="/img/megacartFavicon.png">
<title>MegaCart Orders.net</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>

<!-- MDB -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.css" rel="stylesheet" />


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Itim&family=Jockey+One&display=swap" rel="stylesheet">

<div class="text-center bg-gradient">
  <div class="d-block gap-3 justify-content-center">
    <p class="text-muted mb-2">Order ID <span class="fw-bold text-body"><%=id  %></span></p>
    <p class="text-muted mb-0">Ordered At <span class="fw-bold text-body">12,March 2019</span></p>
  </div>
</div>
<div style="display: flex; justify-content: center;" >
  <ul id="progressbar-1" class="mx-0 mt-0 mb-5 px-0 pt-0 pb-4 w-50">
    <li class="step0 active" id="step1"><span
        style="margin-left: 22px; margin-top: 12px;">PLACED</span></li>
    <li class="step0 active text-center" id="step2"><span>SHIPPED</span></li>
    <li class="step0 text-muted text-end" id="step3"><span
        style="margin-right: 22px;">DELIVERED</span></li>
  </ul>
</div>


<% for(let i=0;i<order.products.length;i++){ %>
  <section class="gradient-custom-2">
    <div class="container py-5">
      <div class="row d-flex justify-content-center align-items-center ">
        <div class="col-md-10 col-lg-8 col-xl-6">
          <div class="card card-stepper" style="border-radius: 16px;">
            <div class="card-header p-4">
              <div class="d-flex justify-content-between align-items-center">
              </div>
            </div>
            <div class="card-body p-4">
              <div class="d-flex flex-row mb-4 pb-2">
                <div class="flex-fill">
                  <h5 class="bold"><%=order.products[i].pname  %></h5>
                  <p class="text-muted"> Qt: 1 item</p>
                  <h4 class="mb-3"> <%= new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR',maximumFractionDigits: 0 }).format(order.products[i].price) %> <span class="small text-muted"> via (<%=order.PaymentMethod.toUpperCase()  %>) </span></h4>
                  <p class="text-muted">Tracking Status on: 
                    <span class="text-body currentTime"></span>
                    , Today
                  </p>
                </div>
                <script>
                  function updateCurrentTime() {
                    var currentDate = new Date();
                    var hours = currentDate.getHours();
                    var minutes = currentDate.getMinutes();
                    var seconds = currentDate.getSeconds();
                
                    var formattedTime = hours + ':' + minutes + ':<span style="color: green ;">' + seconds + '</span>';
                
                    var currentTimeElements = document.querySelectorAll('.currentTime');
                  currentTimeElements.forEach(function (element) {
                    element.innerHTML = formattedTime;
                    });
                  }
                
                  updateCurrentTime();
                  setInterval(updateCurrentTime, 1000);
                </script>
                
                <div>
                  <img class="align-self-center img-fluid"
                    src="/primg/<%= order.products[i].prd_images[0] %>" width="200">
                </div>
              </div>
            
              <% if(order.products.length==1){ %>
              <div class="card-footer1 p-4">
                <div class="d-flex justify-content-between">
                  <h5 class="fw-normal mb-0"><a href="#!">Track</a></h5>
                  <div class="border-start h-100"></div>
                  <h5 class="fw-normal mb-0"><a href="#!">Cancel</a></h5>
                  <div class="border-start h-100"></div>
                  <h5 class="fw-normal mb-0"><a href="#!">Pre-pay</a></h5>
                  <div class="border-start h-100"></div>
                  <h5 class="fw-normal mb-0"><a href="#!" class="text-muted"><i class="fas fa-ellipsis-v"></i></a>
                  </h5>
                </div>
              </div>
              <% }else{  %>
                <div class="d-flex justify-content-end">
                  <button class="btn" style="background-color: #392539; color: white;">Cancle</button>
                </div>
                <% } %>
    
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  
  <% } %>
  <% if(order.products.length>1){ %>
<div class="card-footer p-3">
  <div class="d-flex justify-content-lg-center gap-5">
    <h5 class="fw-normal mb-0"><a href="#!" style="color: #BF7DC1;">Track</a></h5>
    <h5 class="fw-normal mb-0"><a href="#!" style="color: #BF7DC1;">Cancel All Orders</a></h5>
    <% if(order.PaymentMethod=='cod'){ %>
    <h5 class="fw-normal mb-0"><a href="#!" style="color: #BF7DC1;">Pre-pay <span style="color: white; font-size: 15px; margin-left: 5px;"><%= new Intl.NumberFormat('en-IN', { style: 'currency', currency: 'INR',maximumFractionDigits: 0 }).format(order.totalAmount) %></span></a></h5>
    <% }else{ %>
      <h5 class="fw-normal mb-0"><a href="#!" style="color: green;">Payment Completed</a></h5>
      <% } %>
    <h5 class="fw-normal mb-0"><a href="#!" class="text-muted"><i class="fas fa-ellipsis-v"></i></a></h5>
  </div>
</div>
<% } %>


  <!-- Add the following CSS to your styles.css file --> 
  <style>
    .card-footer {
      color: white;
      text-decoration: none;
      position: fixed;
      bottom: 0;
      width: 100%;
      background-color:#392539; /* Adjust the background color as needed */
      box-shadow: 0px -4px 8px rgba(0, 0, 0, 0.1); /* Optional: Add a shadow for better visibility */
    }
  </style>


<style>

#progressbar-1 {
color: #455A64;
}

#progressbar-1 li {
list-style-type: none;
font-size: 13px;
width: 33.33%;
float: left;
position: relative;
}

#progressbar-1 #step1:before {
content: "1";
color: #fff;
width: 29px;
margin-left: 22px;
padding-left: 11px;
}

#progressbar-1 #step2:before {
content: "2";
color: #fff;
width: 29px;
}

#progressbar-1 #step3:before {
content: "3";
color: #fff;
width: 29px;
margin-right: 22px;
text-align: center;
}

#progressbar-1 li:before {
line-height: 29px;
display: block;
font-size: 12px;
background: #455A64;
border-radius: 50%;
margin: auto;
}

#progressbar-1 li:after {
content: '';
width: 121%;
height: 2px;
background: #392539;
position: absolute;
left: 0%;
right: 0%;
top: 15px;
z-index: -1;
}

#progressbar-1 li:nth-child(2):after {
left: 50%
}

#progressbar-1 li:nth-child(1):after {
left: 25%;
width: 121%
}

#progressbar-1 li:nth-child(3):after {
left: 25%;
width: 50%;
}

#progressbar-1 li.active:before,
#progressbar-1 li.active:after {
background: #BF7DC1;
}

.card-stepper {
z-index: 0
}
</style>